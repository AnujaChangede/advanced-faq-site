<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta charset="UTF-8">
    <!-- <link rel="stylesheet" href="//unpkg.com/docsify/themes/vue.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css" title="Simple">
</head>

<body>
    <div id="app"></div>
    <script>
        window.$docsify = {
            loadSidebar: true,
            name: 'Docs',
            themeColor: '#3F51B5',
            // homepage: 'faq-general.md',
            // basePath: "/",
            alias: {
                // proxy for any /gh/ url to fetch markdown from real github url
                '.*?/gh/(.*)': 'https://raw.githubusercontent.com/$1',
            },
            search: {
                // set to 1 hour on development, change to 1 day on prod
                maxAge: 1000*1*60*60, 
                depth: 6,
                noData: 'No results!',
                placeholder: 'Search...'
            },
            routerMode: 'hash',
            auto2top: true,
            maxLevel: 3,
            subMaxLevel: 3,
            plugins: [
                /**
                 * custom plugin to replace various relative url to point to 
                 * proper github repo url
                 */
                function (hook, vm) {
                    hook.beforeEach(function (rawMarkdown) {
                        let modifiedMarkdown = rawMarkdown
                        // only apply changes if the file is fetched from github
                        if (/githubusercontent\.com/.test(vm.route.file)){
                            let currentFileUrl = (vm.route.file).toLowerCase()
                            let currentFileRepoUrl = 
                                currentFileUrl
                                    .replace('raw.githubusercontent.com','github.com')
                                    .replace('/master/','/tree/master/')
                                    .split('readme.md')[0]
                            // replace (example/) to (/example/), to make it consistent
                            modifiedMarkdown = modifiedMarkdown.replace(/\]\(example/g,"\]\(/example")
                            // replace relative /.. urls to absolute github urls
                            modifiedMarkdown = modifiedMarkdown.replace(/\]\(\/(.*)\)/g, "]("+currentFileRepoUrl+"$1)")
                            // replace #(begin with number) to #_ to make hash url work on docsify
                            modifiedMarkdown = modifiedMarkdown.replace(/\]\(\#([0-9].*)\)/g," ](#_$1)")
                        }
                        return modifiedMarkdown
                    })
                },
            ],
        }
    </script>
    <!-- Docsify library -->
    <script src="https://unpkg.com/docsify/lib/docsify.min.js"></script>
    <!-- Docsify plugins -->
    <script src="https://unpkg.com/docsify/lib/plugins/zoom-image.min.js"></script>
    <script src="https://unpkg.com/docsify/lib/plugins/emoji.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docsify-themeable@0"></script>
    <script src="https://unpkg.com/docsify-pagination/dist/docsify-pagination.min.js"></script>
    <!-- Code highlighter language plugins -->
    <script src="https://unpkg.com/prismjs/components/prism-python.min.js"></script>
    <script src="https://unpkg.com/prismjs/components/prism-go.min.js"></script>
    <script src="https://unpkg.com/prismjs/components/prism-ruby.min.js"></script>
    <script src="https://unpkg.com/prismjs/components/prism-php.min.js"></script>
</body>

</html>